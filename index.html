<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <title>Protrack</title>

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#3b82f6" />

  <link rel="manifest" href="manifest.json">
  <link rel="icon" href="icon-192.png">
  <link rel="apple-touch-icon" href="icon-192.png">

  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-title" content="Protrack">

  <link rel="stylesheet" href="style.css" />
</head>

<body>

<header class="app-header">
  <div class="header-left">
    <picture>
      <source media="(max-width:420px)" srcset="logo-protrack-small.png">
      <img src="logo-protrack-horizontal.png" class="app-logo" />
    </picture>
    <span id="userName" class="user-name"></span>
  </div>

  <div class="header-right">
    <button id="loginBtn">Login</button>
    <button id="logoutBtn" style="display:none;">Logout</button>
  </div>
</header>

<p id="offlineHint" class="hint" style="display:none;">
  ⚠️ Offline – Einträge werden später synchronisiert
</p>

<div id="loginOverlay" class="overlay">
  <div class="login-card">
    <h2>Login</h2>
    <input id="email" type="email" placeholder="E-Mail">
    <input id="password" type="password" placeholder="Passwort">
    <button id="confirmLogin">Einloggen</button>
  </div>
</div>

<section class="card">
  <h2>Heute</h2>

  <div class="today-row">
    <span class="label blue">Noah</span>
    <div class="bar"><div id="todayNoah" class="fill blue"></div></div>
    <span id="todayNoahPct" class="pct">0%</span>
  </div>

  <div class="today-row">
    <span class="label green">Max</span>
    <div class="bar"><div id="todayMax" class="fill green"></div></div>
    <span id="todayMaxPct" class="pct">0%</span>
  </div>
</section>

<section class="card">
  <h2>Diese Woche</h2>
  <div id="weekChart"></div>
  <p class="hint">
    Ø Woche – Noah: <span id="avgNoah">0%</span> ·
    Max: <span id="avgMax">0%</span>
  </p>
</section>

<section class="card">
  <h2>Heute eintragen</h2>
  <input id="proteinInput" type="number" placeholder="Protein heute (g)">
  <button id="saveBtn" disabled>Speichern</button>
  <p id="saveHint" class="hint" style="display:none;">✔️ Gespeichert</p>
</section>

<footer class="hint" style="text-align:center">
  Zielwert: 2 g Protein pro kg Körpergewicht ≈ <strong>170 g</strong>
</footer>

<script>
  if ("serviceWorker" in navigator) {
    navigator.serviceWorker.register("sw.js");
  }
</script>

<script type="module" src="app.js"></script>
</body>
</html>
